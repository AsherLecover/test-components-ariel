<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>select studend class</title>
</head>

<body>
    <select name="selecctClases1" class="selecctClases">

        <option value="class1">choice</option>
        <option value="class1">class1</option>
        <option value="class2">class2</option>
        <option value="class3">class3</option>
        <option value="class4">class4</option>
    </select>

    <select name="selecctClases2" class="selecctClases">
        <option value="class1">choice</option>
        <option value="class1">class1</option>
        <option value="class2">class2</option>
        <option value="class3">class3</option>
        <option value="class4">class4</option>
    </select>
    <div class="container">
        <div id="div1"></div>
        <div id="div2"></div>
    </div>

    <style>
        #container {
            display: flex;

        }

        #div1 {
            display: flex;
            flex-direction: column;

            background-color: aqua;
            width: 210px;
            float: left;
            text-align: center;
            line-height: 40px;
            font-size: 15px;

        }

        #div2 {
            display: flex;
            flex-direction: column;

            background-color: coral;
            width: 210px;
            margin: 20px;
            text-align: center;
            line-height: 40px;
            font-size: 15px;
        }
    </style>


    <script>

        let db = {
            "class1": [
                { id: 0, name: "Yo lecover", age: 481, year: 2050, goosStudent: false },
                { id: 1, name: "Asher lecover", age: 30, year: 2020, goosStudent: false },
                {
                    id: 2, name: "Reuven lecover", age: 31, year: 2021, goosStudent: false
                },
                { id: 3, name: "Shimon lecover", age: 32, year: 2022, goosStudent: false },
                { id: 4, name: "Levi lecover", age: 33, year: 2023, goosStudent: false },
                {
                    id: 5, name: "Yehoda lecover", age: 34, year: 2024, goosStudent: false
                },
                {
                    id: 6,
                    name: "Isaschar lecover",
                    age: 35,
                    year: 2025,
                    goosStudent: false
                },
                { id: 7, name: "Zvolon lecover", age: 36, year: 2026, goosStudent: true },
                { id: 8, name: "Dan lecover", age: 37, year: 2027, goosStudent: true },
                {
                    id: 9,
                    name: "Naftali lecover",
                    age: 38,
                    year: 2028,
                    goosStudent: true
                },
                {
                    id: 10,
                    name: "Binyamin lecover",
                    age: 39,
                    year: 2029,
                    goosStudent: true
                },
                { id: 11, name: "Gad lecover", age: 40, year: 2030, goosStudent: true },
                { id: 12, name: "Asher lecover", age: 41, year: 2040, goosStudent: true }
            ],
            "class2": [
                {
                    id: 0,
                    name: "aa lecover",
                    age: 41,
                    year: 2050,
                    goosStudent: false
                },
                {
                    id: 1,
                    name: "bb l132ecover",
                    age: 30,
                    year: 2020,
                    goosStudent: false
                },
                {
                    id: 2,
                    name: "Reuven123 lecover",
                    age: 31,
                    year: 2021,
                    goosStudent: false
                },
                {
                    id: 3,
                    name: "Shim123on lecover",
                    age: 32,
                    year: 2022,
                    goosStudent: false
                },
                {
                    id: 4,
                    name: "Levi123 lecover",
                    age: 33,
                    year: 2023,
                    goosStudent: false
                },
                {
                    id: 5,
                    name: "Yehod123a lecover",
                    age: 34,
                    year: 2024,
                    goosStudent: false
                },
                {
                    id: 6,
                    name: "Isascha123r lecover",
                    age: 35,
                    year: 2025,
                    goosStudent: false
                },
                {
                    id: 7,
                    name: "Zvol123on lecover",
                    age: 36,
                    year: 2026,
                    goosStudent: true
                },
                { id: 8, name: "Dan123 lecover", age: 37, year: 2027, goosStudent: true },
                {
                    id: 9,
                    name: "Naft123ali lecover",
                    age: 38,
                    year: 2028,
                    goosStudent: true
                },
                {
                    id: 10,
                    name: "Bin123yamin lecover",
                    age: 39,
                    year: 2029,
                    goosStudent: true
                },
                {
                    id: 11,
                    name: "Ga132d lecover",
                    age: 40,
                    year: 2030,
                    goosStudent: true
                },
                {
                    id: 12,
                    name: "As132her lecover",
                    age: 41,
                    year: 2040,
                    goosStudent: true
                }
            ],
            "class3": [
                {
                    id: 0,
                    name: "Yo3465sef lecover",
                    age: 41,
                    year: 2050,
                    goosStudent: false
                },
                {
                    id: 1,
                    name: "Ash3654er lecover",
                    age: 30,
                    year: 2020,
                    goosStudent: false
                },
                {
                    id: 2,
                    name: "Reuven 3456lecover",
                    age: 31,
                    year: 2021,
                    goosStudent: false
                },
                {
                    id: 3,
                    name: "Shimon leco5436ver",
                    age: 32,
                    year: 2022,
                    goosStudent: false
                },
                { id: 4, name: "Levi lecover", age: 33, year: 2023, goosStudent: false },
                {
                    id: 5,
                    name: "Y345ehoda lecover",
                    age: 34,
                    year: 2024,
                    goosStudent: false
                },
                {
                    id: 6,
                    name: "Isasch34ar lecover",
                    age: 35,
                    year: 2025,
                    goosStudent: false
                },
                {
                    id: 7,
                    name: "Zvolon5345 lecover",
                    age: 36,
                    year: 2026,
                    goosStudent: true
                },
                { id: 8, name: "Dan lecove345r", age: 37, year: 2027, goosStudent: true },
                {
                    id: 9,
                    name: "Naftali lecover",
                    age: 38,
                    year: 2028,
                    goosStudent: true
                },
                {
                    id: 10,
                    name: "Bi456nyamin lecover",
                    age: 39,
                    year: 2029,
                    goosStudent: true
                },
                { id: 11, name: "Gad65 lecover", age: 40, year: 2030, goosStudent: true },
                {
                    id: 12,
                    name: "Asher75 lecover",
                    age: 41,
                    year: 2040,
                    goosStudent: true
                }
            ],
            "class4": [
                {
                    id: 0,
                    name: "Yos",
                    age: 41,
                    year: 2050,
                    goosStudent: false
                },
                {
                    id: 1,
                    name: "Asher l0798ecover",
                    age: 30,
                    year: 2020,
                    goosStudent: false
                },
                {
                    id: 2,
                    name: "Reuven leco0987ver",
                    age: 31,
                    year: 2021,
                    goosStudent: false
                },
                {
                    id: 3,
                    name: "0987Shimon lecover",
                    age: 32,
                    year: 2022,
                    goosStudent: false
                },
                {
                    id: 4,
                    name: "Levi907 lecover",
                    age: 33,
                    year: 2023,
                    goosStudent: false
                },
                {
                    id: 5,
                    name: "Yehoda 8098lecover",
                    age: 34,
                    year: 2024,
                    goosStudent: false
                },

                {
                    id: 6,
                    name: "I0987saschar lecover",
                    age: 35, year: 2025,
                    goosStudent: false
                },
                {
                    id: 7, name: "Zvo90809lon lecover",
                    age: 36,
                    year: 2026,
                    goosStudent: true
                },

                {
                    id: 8,
                    name: "Dan leco0879ver",
                    age: 37,
                    year: 2027,
                    goosStudent: true
                },
                {
                    id: 9,
                    name: "Naftali leco07890ver",
                    age: 38,
                    year: 2028,
                    goosStudent: true
                },
                {
                    id: 10,
                    name: "Bin09870yamin lecover",
                    age: 39,
                    year: 2029,
                    goosStudent: true
                },
                {
                    id: 11,
                    name: "Gad le8790890cover",
                    age: 40,
                    year: 2030,
                    goosStudent: true
                },
                {
                    id: 12,
                    name: "Asher le6666666666666666cover890",
                    age: 41,
                    year: 2040,
                    goosStudent: true
                }
            ]
        };


        let select = document.querySelectorAll('.selecctClases');
        for (let i = 0; i < select.length; i++) {

            select[i].onchange = event => {


                myClassSelected = select[i].selectedOptions[0].innerHTML; // return class1 or class2 depnse on the user chuise

                // render sction --------------------------------------------- 
                let templete1 = `
        <web-component>[id]</web-component>`
                function render(template, data) {
                    let result = '';
                    let pattern = /\[(.*)\]/g;
                    let propertiesInTemplate = template.match(pattern)

                    for (let i = 0; i < propertiesInTemplate.length; i++) {
                        let p = propertiesInTemplate[i];
                        p = p.replace('[', '').replace(']', '')
                        propertiesInTemplate[i] = p
                    }

                    db[myClassSelected].forEach(item => {

                        let itemHtml = template
                        propertiesInTemplate.forEach(p => {

                            let propValue = item[p]

                            itemHtml = itemHtml.replace(`[${p}]`, propValue)
                        })
                        result += itemHtml

                    });
                    console.log(result);

                    return result
                }



                let div1 = document.querySelector('#div1');
                let div2 = document.querySelector('#div2');
                if (i == 0) {
                    div1.innerHTML = render(templete1, db[myClassSelected])
                }
                if (i == 1) {
                    div2.innerHTML = render(templete1, db[myClassSelected])
                }
            }

        }

    </script>

    <!---------------------------------------------------------------------------------->
    <script>


        class WebComponent extends HTMLElement {
            constructor() {
                super();

                const shadow = this.attachShadow({ mode: "open" });


                console.log(db[myClassSelected].length);

                for (let i = 0; i < db[myClassSelected].length; i++) {

                    let div = document.createElement("div");
                    let studentImg = document.createElement("img");
                    let studentNameP = document.createElement("p");
                    let studentAgeP = document.createElement("p");
                    let studentYearP = document.createElement("p");
                    let studentGoosStudentP = document.createElement("p");

                    div.appendChild(studentImg);
                    div.appendChild(studentNameP);
                    div.appendChild(studentAgeP);
                    div.appendChild(studentYearP);
                    div.appendChild(studentGoosStudentP);
                    shadow.appendChild(div);


                    studentImg.innerHTML = `http//img${db[myClassSelected][i].id}.jpg`;
                    studentImg.src = `http//img${db[myClassSelected][i].id}.jpg`
                    studentNameP.innerHTML = db[myClassSelected][i].name;
                    studentAgeP.innerHTML = db[myClassSelected][i].age;
                    studentYearP.innerHTML = db[myClassSelected][i].year;
                    studentGoosStudentP.innerHTML = db[myClassSelected][i].goosStudent;


                }

                let style = document.createElement("style");
                shadow.appendChild(style);

                style.textContent = `
                div{
                    border: 2px solid black;
                    padding: 2px;
                    margin: 2px;
                }`;
            }
        }
        customElements.define("web-component", WebComponent);
    </script>

</body>

</html>